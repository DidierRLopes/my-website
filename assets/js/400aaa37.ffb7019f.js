"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[71250],{28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>a});var i=n(96540);const s={},o=i.createContext(s);function r(e){const t=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:t},e.children)}},38893:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>r,metadata:()=>i,toc:()=>d});var i=n(78420),s=n(74848),o=n(28453);const r={slug:"how-i-built-an-mcp-server-for-developers-building-openbb-apps",title:"How I built an MCP Server for developers building OpenBB apps",date:new Date("2025-09-10T00:00:00.000Z"),image:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps",tags:["openbb","mcp","ai","development","tools","documentation"],description:"The hardest part of building an OpenBB app isn't writing Python, it's getting the widgets.json spec right. I built an MCP server to expose every piece of documentation as a structured, callable tool."},a=void 0,l={authorsImageUrls:[]},d=[{value:"1. Breaking down the docs into building blocks",id:"1-breaking-down-the-docs-into-building-blocks",level:2},{value:"2. Adding an ad-hoc boilerplate tool",id:"2-adding-an-ad-hoc-boilerplate-tool",level:2},{value:"3. Using FastMCP to turn everything into tools",id:"3-using-fastmcp-to-turn-everything-into-tools",level:2},{value:"4. Deploying on Smithery.ai for easy access",id:"4-deploying-on-smitheryai-for-easy-access",level:2},{value:"5. Testing",id:"5-testing",level:2},{value:"How to use it",id:"how-to-use-it",level:2},{value:"Monte Carlo stock simulation widget",id:"monte-carlo-stock-simulation-widget",level:2},{value:"tl;dr",id:"tldr",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["The hardest part of building an OpenBB app isn't writing Python, it's getting the ",(0,s.jsx)(t.code,{children:"widgets.json"})," spec right, since this spec was invented by us."]}),"\n",(0,s.jsx)(t.p,{children:"Every app requires developers to define widget types, inputs, and configuration options in exactly the right format. The documentation is strong, but it is long-form, which forces you to dig around for the parts you need. That slows down iteration, especially when you just want to get an idea live in OpenBB Workspace."}),"\n",(0,s.jsxs)(t.p,{children:["AI feels like a natural solution here. For example, providing the documentation to a model like Claude Code and asking it to generate your ",(0,s.jsx)(t.code,{children:"widgets.json"})," spec."]}),"\n",(0,s.jsxs)(t.p,{children:["If you ask Claude Code to read the docs from OpenBB, it ",(0,s.jsx)(t.strong,{children:"kind of works"}),". But it takes too much time (given the extensive documentation available), wastes a lot of tokens, and the model often gets confused. This is the same as using an MCP server like Context7, except that with Context7 the context is not really guaranteed to be up to date, so it is even worse."]}),"\n",(0,s.jsxs)(t.p,{children:["The alternative is to send the exact part of the page that the model requires, which actually works pretty well. But this is very time consuming for the developer. The problem is that when you are building a complex widget, you need context from a lot of different pages, which increases the risk of not sending the right context and the model hallucinating. So basically, it ",(0,s.jsx)(t.strong,{children:"doesn't work either"}),"."]}),"\n",(0,s.jsx)(t.p,{children:"BUT."}),"\n",(0,s.jsxs)(t.p,{children:["What if, instead of stuffing all the docs into context, ",(0,s.jsx)(t.strong,{children:"I built an MCP server"})," where every piece of the documentation is exposed as a structured, callable tool?"]}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{width:"800",src:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps_1.png"})}),"\n",(0,s.jsx)(t.p,{children:"I just had to try it."}),"\n",(0,s.jsx)(t.h2,{id:"1-breaking-down-the-docs-into-building-blocks",children:"1. Breaking down the docs into building blocks"}),"\n",(0,s.jsxs)(t.p,{children:["I spent the weekend ",(0,s.jsx)(t.a,{href:"https://github.com/OpenBB-finance/openbb-docs/pull/104",children:"refactoring OpenBB docs"})," into developer and analyst roles, so I understood very well the principal components that were relevant for developers."]}),"\n",(0,s.jsx)(t.p,{children:"There are three natural categories of building blocks:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Widget types"}),": Plotly charts, AgGrid tables, Markdown, HTML, Metrics, etc."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Parameters and controls"}),": dropdowns, toggles, date pickers, text inputs, etc."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Configuration options"}),": grid sizing, stale times, error handling, refetch intervals, etc."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["Instead of treating the docs as one big reference, I split them into these ",(0,s.jsx)(t.strong,{children:"granular tools"}),"."]}),"\n",(0,s.jsx)(t.h2,{id:"2-adding-an-ad-hoc-boilerplate-tool",children:"2. Adding an ad-hoc boilerplate tool"}),"\n",(0,s.jsxs)(t.p,{children:["On top of the building blocks, I added one special tool: ",(0,s.jsx)(t.code,{children:"building_widgets_on_openbb"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["This is an ",(0,s.jsx)(t.strong,{children:"ad-hoc boilerplate reference"})," that acts as a base. By requiring it to always be called first, I can guarantee that every widget starts from a solid baseline and everything else plugs into that baseline."]}),"\n",(0,s.jsx)(t.p,{children:"I enforced this behavior with the following MCP tool description:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'@mcp.tool()\ndef building_widgets_on_openbb() -> str:\n    """Essential boilerplate code for building OpenBB Workspace widgets. \n    This provides the foundational FastAPI setup, CORS configuration, widgets.json endpoints, \n    and register_widget decorator pattern. ALWAYS call this first when creating OpenBB widgets \n    to get the required boilerplate structure."""\n    \n    return """# Essential Boilerplate Code for OpenBB Workspace Widgets\n...\n"""\n'})}),"\n",(0,s.jsx)(t.h2,{id:"3-using-fastmcp-to-turn-everything-into-tools",children:"3. Using FastMCP to turn everything into tools"}),"\n",(0,s.jsxs)(t.p,{children:["I used ",(0,s.jsx)(t.strong,{children:"FastMCP"})," to create a tool for each block. Every widget type, parameter, and configuration setting is its own MCP endpoint."]}),"\n",(0,s.jsx)(t.p,{children:'So instead of asking the AI, "What\'s the JSON spec for a dropdown?" and hoping it parses the docs correctly, the AI can just call:'}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"widget_parameters_dropdown"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"widget_types_plotly_charts"})}),"\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.code,{children:"widget_configuration_grid_size"})}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"and immediately get valid JSON to work with."}),"\n",(0,s.jsx)(t.h2,{id:"4-deploying-on-smitheryai-for-easy-access",children:"4. Deploying on Smithery.ai for easy access"}),"\n",(0,s.jsx)(t.p,{children:"Finally, I deployed the server on Smithery.ai. That makes it discoverable, shareable, and instantly usable, with no local setup required. You can connect Claude Desktop, Cursor, or Smithery Playground to it in seconds."}),"\n",(0,s.jsxs)(t.p,{children:["It became immediately available ",(0,s.jsx)(t.a,{href:"https://smithery.ai/server/@DidierRLopes/openbb-docs-mcp",children:"here"}),"."]}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{width:"800",src:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps.png"})}),"\n",(0,s.jsx)(t.h2,{id:"5-testing",children:"5. Testing"}),"\n",(0,s.jsx)(t.p,{children:"But I didn't just deploy and hope for the best."}),"\n",(0,s.jsxs)(t.p,{children:['Instead, I clicked on "Explore capabilities" on the ',(0,s.jsx)(t.a,{href:"https://smithery.ai/server/@DidierRLopes/openbb-docs-mcp",children:"smithery.ai page"})," and asked it to create a complicated ",(0,s.jsx)(t.code,{children:"widgets.json"})," spec for a specific widget request."]}),"\n",(0,s.jsx)(t.p,{children:"It didn't work perfectly at first."}),"\n",(0,s.jsx)(t.p,{children:"But that's okay. I went back and improved the docs (and even realized that I needed the ad-hoc boilerplate tool)."}),"\n",(0,s.jsx)(t.p,{children:"Eventually, it worked."}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{width:"800",src:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps_2.png"})}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{width:"800",src:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps_3.png"})}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{width:"800",src:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps_4.png"})}),"\n",(0,s.jsx)(t.h2,{id:"how-to-use-it",children:"How to use it"}),"\n",(0,s.jsx)(t.p,{children:"Here's how you may use this OpenBB widgets.json spec MCP Server with Claude Code."}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["Add this MCP Server to Claude Code (URL ",(0,s.jsx)(t.a,{href:"https://server.smithery.ai/@DidierRLopes/openbb-docs-mcp/mcp",children:"here"}),")"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"claude mcp add --transport http openbb-docs-mcp https://server.smithery.ai/@DidierRLopes/openbb-docs-mcp/mcp\n"})}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsx)(t.li,{children:"Set up MCP Server and authenticate"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:'And ensure you see a "\u2705 connected"'}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{width:"800",src:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps_5.png"})}),"\n",(0,s.jsxs)(t.ol,{start:"3",children:["\n",(0,s.jsx)(t.li,{children:"Then ask your prompt, and you need to confirm that CC can access these MCP tools."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This is what you expect to see:"}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{width:"800",src:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps_6.png"})}),"\n",(0,s.jsxs)(t.p,{children:["In the end, you should be able to get the correct ",(0,s.jsx)(t.code,{children:"widgets.json"})," spec."]}),"\n",(0,s.jsx)(t.h2,{id:"monte-carlo-stock-simulation-widget",children:"Monte Carlo stock simulation widget"}),"\n",(0,s.jsx)(t.p,{children:"In order to test this, I ask CC:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.em,{children:"Create an OpenBB widget that has 3 parameters (ticker str, start date and boolean). The data is meant to be a plotly chart, but also support raw data. And because it's a monte carlo simulation, can you add a run button to it?"})}),"\n",(0,s.jsx)(t.p,{children:"But essentially, it allowed me to connect this one-shot widget to the workspace:"}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{width:"800",src:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps_7.png"})}),"\n",(0,s.jsx)(t.p,{children:"Note the difficulty associated with building this widget from scratch:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Requires adding the boilerplate code"}),"\n",(0,s.jsx)(t.li,{children:"Requires a Plotly visualization with simulation paths plus percentile bands"}),"\n",(0,s.jsxs)(t.li,{children:["Adds 3 parameters: ",(0,s.jsx)(t.code,{children:"ticker"})," (text), ",(0,s.jsx)(t.code,{children:"start_date"})," (date), ",(0,s.jsx)(t.code,{children:"use_volatility_adjustment"})," (boolean)"]}),"\n",(0,s.jsx)(t.li,{children:"Raw data mode returning pure simulation arrays"}),"\n",(0,s.jsx)(t.li,{children:"A run button for manual execution"}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"This example shows the end-to-end workflow:"}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"AI + MCP server \u2192 OpenBB widget in minutes."})}),"\n",(0,s.jsxs)(t.p,{children:["One recommendation I have is to separate the data problem from the ",(0,s.jsx)(t.code,{children:"widgets.json"})," specs. Make sure it works with mock data first, and once that is figured out, you just need to ensure you can push the correct data to it."]}),"\n",(0,s.jsx)(t.h2,{id:"tldr",children:"tl;dr"}),"\n",(0,s.jsx)(t.p,{children:"AI as a search engine for docs is messy and inconsistent."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"AI as a programmable assistant with tools is structured, accurate, and composable."})}),"\n",(0,s.jsx)(t.p,{children:"By exposing the docs as tools, you reduce hallucinations, improve accuracy, and make it much easier for developers to mix and match widget components when building new OpenBB apps."}),"\n",(0,s.jsx)(t.p,{children:"Happy hacking!"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"PS:"})," We are actually working on introducing Widget Studio, which will greatly simplify the user experience of building custom widgets in the workspace, particularly when it comes to the UI."]}),"\n",(0,s.jsx)("p",{align:"center",children:(0,s.jsx)("img",{width:"800",src:"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps_8.png"})})]})}function p(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},78420:e=>{e.exports=JSON.parse('{"permalink":"/blog/how-i-built-an-mcp-server-for-developers-building-openbb-apps","editUrl":"https://github.com/DidierRLopes/my-website/tree/main/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps.md","source":"@site/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps.md","title":"How I built an MCP Server for developers building OpenBB apps","description":"The hardest part of building an OpenBB app isn\'t writing Python, it\'s getting the widgets.json spec right. I built an MCP server to expose every piece of documentation as a structured, callable tool.","date":"2025-09-10T00:00:00.000Z","tags":[{"inline":true,"label":"openbb","permalink":"/blog/tags/openbb"},{"inline":true,"label":"mcp","permalink":"/blog/tags/mcp"},{"inline":true,"label":"ai","permalink":"/blog/tags/ai"},{"inline":true,"label":"development","permalink":"/blog/tags/development"},{"inline":true,"label":"tools","permalink":"/blog/tags/tools"},{"inline":true,"label":"documentation","permalink":"/blog/tags/documentation"}],"readingTime":6.28,"hasTruncateMarker":true,"authors":[],"frontMatter":{"slug":"how-i-built-an-mcp-server-for-developers-building-openbb-apps","title":"How I built an MCP Server for developers building OpenBB apps","date":"2025-09-10T00:00:00.000Z","image":"/blog/2025-09-10-how-i-built-an-mcp-server-for-developers-building-openbb-apps","tags":["openbb","mcp","ai","development","tools","documentation"],"description":"The hardest part of building an OpenBB app isn\'t writing Python, it\'s getting the widgets.json spec right. I built an MCP server to expose every piece of documentation as a structured, callable tool."},"unlisted":false,"prevItem":{"title":"The trampoline job - Optimize your career for growth","permalink":"/blog/the-trampoline-job-optimize-your-career-for-growth"},"nextItem":{"title":"Tracking your partner\'s health stats with Oura and AI","permalink":"/blog/tracking-your-partner-health-stats-with-oura-and-ai"}}')}}]);